#! /usr/bin/env python3
# -*- coding: utf-8 -*-

DOCKER_IMAGE = "composer/composer"
CONTAINER_DIR = "/app"

import os
import sys
from pathlib import Path
lib_path = Path(Path(os.path.realpath(__file__)).parent.parent, "lib/python")
sys.path.append(str(lib_path))

import argparse
from docker.runner import runner

parser = argparse.ArgumentParser(description = 'Running Composer in Docker')
parser.add_argument('-dcw',
                    '--docker-command-working_dir',
                    type=str,
                    default=os.getcwd(),
                    help='If specified, use the given directory as working directory.')
parser.add_argument('composer_arguments',
                    nargs=argparse.REMAINDER,
                    help='Arguments for composer')
cli_arguments = parser.parse_args()

runner = runner(DOCKER_IMAGE, CONTAINER_DIR, cli_arguments.docker_command_working_dir)
runner.run(cli_arguments.composer_arguments)
